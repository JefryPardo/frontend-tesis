"use strict";(self.webpackChunkfrontend_tesis=self.webpackChunkfrontend_tesis||[]).push([[406],{9287:(C,f,i)=>{i.r(f),i.d(f,{InicioModule:()=>N});var e=i(6814),_=i(6208),d=i(7160),h=i(3979),t=i(4769);let u=(()=>{class c{static#t=this.\u0275fac=function(r){return new(r||c)};static#e=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-inicio"]],decls:1,vars:0,template:function(r,a){1&r&&t._UZ(0,"router-outlet")},dependencies:[h.lC]})}return c})();var s=i(1535),p=i(9862),n=i(6306),m=i(8504),v=i(553),O=i(357);new p.WM({"Content-Type":"application/json"});let M=(()=>{class c{constructor(o,r,a){this.http=o,this.mensaje=r,this.jwtService=a}getProductos(o){return this.http.get(v.N.api+"/producto/all",this.jwtService.getHttpOptionsWithToken(o)).pipe((0,n.K)(r=>this.handleError(r,["Error","Fallas consultando, int\xe9ntelo nuevamente."])))}handleError(o,r){return this.mensaje.mostrarAlertaError(r[0],r[1]),(0,m._)(r)}static#t=this.\u0275fac=function(r){return new(r||c)(t.LFG(p.eN),t.LFG(s.k),t.LFG(O.T))};static#e=this.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})();var T=i(8810),I=i(2123),E=i(6034);let b=(()=>{class c{constructor(o,r,a,l,g){this.mensaje=o,this.el=r,this.inicioService=a,this.router=l,this.jwtService=g,this.estadoBanner=!0,this.isSearchFixed=!1,this.getListProducto()}onWindowScroll(){const o=this.el.nativeElement.querySelector("#search"),r=this.el.nativeElement.querySelector(".spacer"),a=this.el.nativeElement.querySelector("app-banner").offsetHeight;window.pageYOffset>=a?(o.classList.add("fixed-search"),r.style.height=o.clientHeight+"px",this.isSearchFixed=!0):(o.classList.remove("fixed-search"),r.style.height="0",this.isSearchFixed=!1)}getListProducto(){const o=this.jwtService.getToken();null==o||this.jwtService.isTokenExpired(o)?this.router.navigate(["auth/login"]):this.inicioService.getProductos(o).subscribe(r=>{if(200==r.status){const l=r.body.response;return this.filteredProductosPares=l.productos_pares,this.filteredProductosImpares=l.productos_impares,this.productosPares=l.productos_pares,void(this.productosImpares=l.productos_impares)}if(500==r.status){const a=r.body.code;if("TOK02"===a)return void this.router.navigate(["auth/login"]);if("#feq"===a)return void this.mensaje.mostrarAlertaError("Error","Reporta el error por favor.")}},r=>{this.mensaje.mostrarAlertaError("Spinner off","")})}onSearchChanged(o){this.estadoBanner=0==o.length,this.filteredProductosPares=this.productosPares.filter(r=>r.nombre.toLowerCase().includes(o.toLowerCase())),this.filteredProductosImpares=this.productosImpares.filter(r=>r.nombre.toLowerCase().includes(o.toLowerCase()))}onCardChanged(o){this.router.navigate(["app/catalogo/producto",o])}static#t=this.\u0275fac=function(r){return new(r||c)(t.Y36(s.k),t.Y36(t.SBq),t.Y36(M),t.Y36(h.F0),t.Y36(O.T))};static#e=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-inicio-hub"]],hostBindings:function(r,a){1&r&&t.NdJ("scroll",function(){return a.onWindowScroll()},!1,t.Jf7)},decls:7,vars:3,consts:[[1,"spacer"],["id","search",3,"searchChanged"],[3,"banner","productosPares","productosImpares","idChanged"]],template:function(r,a){1&r&&(t._UZ(0,"app-banner")(1,"div",0),t.TgZ(2,"app-search",1),t.NdJ("searchChanged",function(g){return a.onSearchChanged(g)}),t.qZA(),t.TgZ(3,"app-carta-grid",2),t.NdJ("idChanged",function(g){return a.onCardChanged(g)}),t.qZA(),t._UZ(4,"br")(5,"br")(6,"br")),2&r&&(t.xp6(3),t.Q6J("banner",a.estadoBanner)("productosPares",a.filteredProductosPares)("productosImpares",a.filteredProductosImpares))},dependencies:[T.S,I.g,E.i],styles:[".fixed-search[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;z-index:1;background-color:#fff}"]})}return c})();var y=i(2181),Z=i(707),D=i(7574),A=i(8089),S=i(5606);function w(c,x){1&c&&t._UZ(0,"i",21)}function U(c,x){1&c&&t._UZ(0,"i",22)}const j=function(){return{width:"100%"}};let F=(()=>{class c{constructor(o){this.router=o,this.router.events.pipe((0,y.h)(r=>r instanceof h.m2)).subscribe(()=>{window.scrollTo(0,0)})}toggleFavorite(o){this.favorito=!o}valorEntero(o){return Math.floor(o)}valorDecimal(o){return this.obtenerParteDecimal(o)}obtenerParteDecimal(o){const r=Math.floor(o);return Math.round(100*(o-r))}evaluarUnidades(o){return null==o||null==o?"0":o>1e3?"1000+":o.toString()}validarPrecio(o){return o.precio<o.precio_anterior}onCardChanged(o){this.router.navigate(["app/catalogo/producto",o])}static#t=this.\u0275fac=function(r){return new(r||c)(t.Y36(h.F0))};static#e=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-producto"]],inputs:{producto:"producto",productos:"productos",productosPares:"productosPares",productosImpares:"productosImpares",favorito:"favorito"},decls:28,vars:12,consts:[[1,"bgrid","mb-8"],[3,"imagenes"],[1,"contenedor"],[1,"grid","grid-nogutter","mt-3","px-4"],[1,"col-10"],[1,"grid","grid-nogutter"],[1,"col-12"],[3,"producto"],[1,"col-2","flex","justify-content-center","flex-wrap"],[1,"fav-icon","flex","align-items-center","justify-content-center"],[3,"click"],["class","pi pi-heart",4,"ngIf"],["class","pi pi-heart-fill",4,"ngIf"],[1,"titulo"],[1,"col-10","flex","flex-wrap","my-4","pr-2"],["pButton","","pRipple","","icon","pi pi-plus",1,"bg-black-alpha-90","col-12","w-full","px-0"],[1,"col-2","flex","align-items-center","justify-content-center"],["pButton","","pRipple","","icon","pi pi-percentage",1,"bg-black-alpha-90","col-12","w-full","px-0",3,"click"],[1,"grid","grid-nogutter","mt-3","px-2"],[1,"col-12","titulo"],[3,"productosPares","productosImpares","idChanged"],[1,"pi","pi-heart"],[1,"pi","pi-heart-fill"]],template:function(r,a){1&r&&(t.TgZ(0,"div",0),t._UZ(1,"app-carrusel",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),t._UZ(7,"app-input-precio-normal",7)(8,"app-input-precio-oferta",7),t.qZA()()(),t.TgZ(9,"div",8)(10,"div",9)(11,"button",10),t.NdJ("click",function(){return a.toggleFavorite(a.favorito)}),t.YNc(12,w,1,0,"i",11),t.YNc(13,U,1,0,"i",12),t.qZA()()(),t.TgZ(14,"div",6)(15,"div",13),t._uU(16),t.qZA()(),t.TgZ(17,"div",6)(18,"p"),t._uU(19),t.qZA()(),t.TgZ(20,"div",14),t._UZ(21,"button",15),t.qZA(),t.TgZ(22,"div",16)(23,"button",17),t.NdJ("click",function(){return a.toggleFavorite(a.favorito)}),t.qZA()()()()(),t.TgZ(24,"div",18)(25,"div",19),t._uU(26," M\xe1s productos "),t.qZA()(),t.TgZ(27,"app-carta-grid",20),t.NdJ("idChanged",function(g){return a.onCardChanged(g)}),t.qZA()),2&r&&(t.xp6(1),t.Q6J("imagenes",a.producto.url_imagen),t.xp6(6),t.Q6J("producto",a.producto),t.xp6(1),t.Q6J("producto",a.producto),t.xp6(4),t.Q6J("ngIf",a.favorito),t.xp6(1),t.Q6J("ngIf",!a.favorito),t.xp6(3),t.Oqu(a.producto.nombre),t.xp6(3),t.Oqu(a.producto.descripcion),t.xp6(2),t.Akn(t.DdM(11,j)),t.xp6(6),t.Q6J("productosPares",a.productosPares)("productosImpares",a.productosImpares))},dependencies:[e.O5,Z.Hq,D.S,A.$,E.i,S.L],styles:[".bgrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:100%}.bgrid[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:350px;width:100%}.carrusel[_ngcontent-%COMP%]{overflow:auto;display:flex;scroll-snap-type:x mandatory}.elemento[_ngcontent-%COMP%]{flex-shrink:0;scroll-snap-align:start;width:100%;height:350px}.fav-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.fav-icon[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer}.precio[_ngcontent-%COMP%]{margin:0}span[_ngcontent-%COMP%]{font-weight:600;margin:4px 0;font-size:25px}p[_ngcontent-%COMP%]{text-align:justify;margin:10px 0}.titulo[_ngcontent-%COMP%]{margin-top:10px;font-weight:600}"]})}return c})();function L(c,x){if(1&c&&t._UZ(0,"app-producto",1),2&c){const o=t.oxw();t.Q6J("producto",o.producto)("productosPares",o.filteredProductosPares)("productosImpares",o.filteredProductosImpares)}}const B=[{path:"",component:u,children:[{path:"",redirectTo:"hub",pathMatch:"full"},{path:"hub",component:b},{path:"producto/:id",component:(()=>{class c{constructor(o,r,a,l,g,P){this.route=o,this.productoService=r,this.mensaje=a,this.inicioService=l,this.router=g,this.jwtService=P,this.estado=!1,this.productos=[]}ngOnInit(){const o=this.jwtService.getToken();null==o||this.jwtService.isTokenExpired(o)?this.router.navigate(["auth/login"]):this.route.params.subscribe(r=>{this.productoService.getProducto(r.id,o).subscribe(l=>{let g=l.body;"#SP"===g.code?(this.producto=g.response,this.getListProducto(),this.estado=!0):(this.router.navigate(["app"]),this.mensaje.mostrarAlertaError("Error","Algo salio mal, por favor reportalo."))})})}getListProducto(){const o=this.jwtService.getToken();null!=o?this.jwtService.isTokenExpired(o)?this.router.navigate(["auth/login"]):this.inicioService.getProductos(o).subscribe(r=>{if(200==r.status)return this.productos=r.body.response,this.filteredProductosPares=this.productos.filter((g,P)=>P%2==0),this.filteredProductosImpares=this.productos.filter((g,P)=>P%2!=0),this.productosPares=this.productos.filter((g,P)=>P%2==0),void(this.productosImpares=this.productos.filter((g,P)=>P%2!=0));if(500==r.status){const a=r.body.code;if("TOK02"===a)return void this.router.navigate(["auth/login"]);if("#feq"===a)return void this.mensaje.mostrarAlertaError("Error","Reporta el error por favor.")}},r=>{this.mensaje.mostrarAlertaError("Spinner off","")}):this.router.navigate(["auth/login"])}static#t=this.\u0275fac=function(r){return new(r||c)(t.Y36(h.gz),t.Y36(d.k),t.Y36(s.k),t.Y36(M),t.Y36(h.F0),t.Y36(O.T))};static#e=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-inicio-producto"]],decls:1,vars:1,consts:[[3,"producto","productosPares","productosImpares",4,"ngIf"],[3,"producto","productosPares","productosImpares"]],template:function(r,a){1&r&&t.YNc(0,L,1,3,"app-producto",0),2&r&&t.Q6J("ngIf",a.estado)},dependencies:[e.O5,F]})}return c})()},{path:"**",redirectTo:"hub",pathMatch:"full"}]}];let J=(()=>{class c{static#t=this.\u0275fac=function(r){return new(r||c)};static#e=this.\u0275mod=t.oAB({type:c});static#o=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(B),h.Bz]})}return c})(),N=(()=>{class c{static#t=this.\u0275fac=function(r){return new(r||c)};static#e=this.\u0275mod=t.oAB({type:c});static#o=this.\u0275inj=t.cJS({providers:[d.k],imports:[e.ez,_.m,J]})}return c})()},8810:(C,f,i)=>{i.d(f,{S:()=>_});var e=i(4769);let _=(()=>{class d{static#t=this.\u0275fac=function(u){return new(u||d)};static#e=this.\u0275cmp=e.Xpm({type:d,selectors:[["app-banner"]],decls:2,vars:0,consts:[[1,"banner"],["src","https://raw.githubusercontent.com/JefryPardo/tesis-img/master/logo.png","alt",""]],template:function(u,s){1&u&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.qZA())},styles:['@charset "UTF-8";.banner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100px}.banner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}']})}return d})()},2953:(C,f,i)=>{i.d(f,{s:()=>h});var e=i(4769),_=i(7574),d=i(8089);let h=(()=>{class t{constructor(){}valorEntero(s){return Math.floor(s)}valorDecimal(s){return this.obtenerParteDecimal(s)}obtenerParteDecimal(s){const p=Math.floor(s);return Math.round(100*(s-p))}evaluarUnidades(s){const p=parseInt(s,10);return null==p||null==p?"0":p>1e3?"1000+":p.toString()}validarPrecio(s){return s.precio<s.precio_anterior}static#t=this.\u0275fac=function(p){return new(p||t)};static#e=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-carta"]],inputs:{producto:"producto"},decls:8,vars:5,consts:[[1,"card"],[3,"src"],[3,"producto"],[1,"truncate-text"]],template:function(p,n){1&p&&(e.TgZ(0,"div",0),e._UZ(1,"img",1)(2,"app-input-precio-normal",2)(3,"app-input-precio-oferta",2),e.TgZ(4,"h6"),e._uU(5),e.qZA(),e.TgZ(6,"p",3),e._uU(7),e.qZA()()),2&p&&(e.xp6(1),e.Q6J("src",n.producto.url_imagen,e.LSH),e.xp6(1),e.Q6J("producto",n.producto),e.xp6(1),e.Q6J("producto",n.producto),e.xp6(2),e.hij("unidades: ",n.evaluarUnidades(n.producto.unidades),""),e.xp6(2),e.Oqu(n.producto.nombre))},dependencies:[_.S,d.$],styles:['@charset "UTF-8";.card[_ngcontent-%COMP%]{width:100%;text-align:center;background-color:#fff;padding:5px 5px 10px;text-align:left}.truncate-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:170px}.title[_ngcontent-%COMP%]{text-decoration:line-through}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px;width:100%;max-height:200px}.card[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:4px 0;color:#ababab}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin:0}']})}return t})()},7574:(C,f,i)=>{i.d(f,{S:()=>t});var e=i(4769),_=i(6814),d=i(5810);function h(u,s){if(1&u&&(e.TgZ(0,"div",1)(1,"div")(2,"span"),e._uU(3,"COP "),e.qZA(),e._uU(4),e.ALo(5,"numberFormat"),e.TgZ(6,"span"),e._uU(7),e.qZA()()()),2&u){const p=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,2,p.valorEntero(p.producto.precio))),e.xp6(3),e.hij(".",p.valorDecimal(p.producto.precio),"")}}let t=(()=>{class u{validarPrecio(p){return p.precio<p.precio_anterior}valorEntero(p){return Math.floor(p)}valorDecimal(p){return this.obtenerParteDecimal(p)}obtenerParteDecimal(p){const n=Math.floor(p);return Math.round(100*(p-n))}static#t=this.\u0275fac=function(n){return new(n||u)};static#e=this.\u0275cmp=e.Xpm({type:u,selectors:[["app-input-precio-normal"]],inputs:{producto:"producto"},decls:1,vars:1,consts:[["class","contenedor",4,"ngIf"],[1,"contenedor"]],template:function(n,m){1&n&&e.YNc(0,h,8,4,"div",0),2&n&&e.Q6J("ngIf",!m.validarPrecio(m.producto))},dependencies:[_.O5,d.$],styles:[".contenedor[_ngcontent-%COMP%]{font-weight:600;margin:4px 0}.contenedor[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:600;font-size:25px}.contenedor[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;font-size:12px}"]})}return u})()},8089:(C,f,i)=>{i.d(f,{$:()=>u});var e=i(4769),_=i(6814),d=i(5810);function h(s,p){if(1&s&&(e.TgZ(0,"div",2)(1,"div")(2,"span"),e._uU(3,"COP "),e.qZA(),e._uU(4),e.ALo(5,"numberFormat"),e.TgZ(6,"span"),e._uU(7),e.qZA()()()),2&s){const n=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,2,n.valorEntero(n.producto.precio))),e.xp6(3),e.hij(".",n.valorDecimal(n.producto.precio),"")}}function t(s,p){if(1&s&&(e.TgZ(0,"div",3)(1,"span"),e._uU(2),e.ALo(3,"numberFormat"),e.qZA(),e._uU(4),e.qZA()),2&s){const n=e.oxw();e.xp6(2),e.AsE("COP ",e.lcZ(3,3,n.valorEntero(n.producto.precio_anterior)),".",n.valorDecimal(n.producto.precio_anterior),""),e.xp6(2),e.hij(" ",n.calcularDiferenciaPorcentaje(n.producto),"\n")}}let u=(()=>{class s{validarPrecio(n){return n.precio<n.precio_anterior}valorEntero(n){return Math.floor(n)}valorDecimal(n){return this.obtenerParteDecimal(n)}obtenerParteDecimal(n){const m=Math.floor(n);return Math.round(100*(n-m))}calcularDiferenciaPorcentaje(n){return`- ${((n.precio_anterior-n.precio)/n.precio_anterior*100).toFixed(2)}% Descuento.`}static#t=this.\u0275fac=function(m){return new(m||s)};static#e=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-input-precio-oferta"]],inputs:{producto:"producto"},decls:2,vars:2,consts:[["class","contenedor",4,"ngIf"],["class","marca",4,"ngIf"],[1,"contenedor"],[1,"marca"]],template:function(m,v){1&m&&(e.YNc(0,h,8,4,"div",0),e.YNc(1,t,5,5,"div",1)),2&m&&(e.Q6J("ngIf",v.validarPrecio(v.producto)),e.xp6(1),e.Q6J("ngIf",v.validarPrecio(v.producto)))},dependencies:[_.O5,d.$],styles:[".contenedor[_ngcontent-%COMP%]{font-weight:600;margin:4px 0}.contenedor[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#ea2222;font-weight:600;font-size:25px}.contenedor[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;font-size:12px}.marca[_ngcontent-%COMP%]{font-weight:700;font-size:15px;margin-right:3px;color:#ea2222}.marca[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:line-through;color:#ababab;padding-right:6px}"]})}return s})()},2123:(C,f,i)=>{i.d(f,{g:()=>d});var e=i(4769),_=i(3714);let d=(()=>{class h{constructor(){this.searchChanged=new e.vpe}onSearchInputChange(u){this.searchChanged.emit(u.target.value)}static#t=this.\u0275fac=function(s){return new(s||h)};static#e=this.\u0275cmp=e.Xpm({type:h,selectors:[["app-search"]],outputs:{searchChanged:"searchChanged"},decls:4,vars:0,consts:[[1,"search"],[1,"p-input-icon-right"],[1,"pi","pi-search"],["pInputText","","type","text",1,"w-full",3,"input"]],template:function(s,p){1&s&&(e.TgZ(0,"div",0)(1,"span",1),e._UZ(2,"i",2),e.TgZ(3,"input",3),e.NdJ("input",function(m){return p.onSearchInputChange(m)}),e.qZA()()())},dependencies:[_.o],styles:[".search[_ngcontent-%COMP%]{display:grid;grid-template-columns:100%;margin:10px}"]})}return h})()},5810:(C,f,i)=>{i.d(f,{$:()=>_});var e=i(4769);let _=(()=>{class d{transform(t){if("number"==typeof t)return t.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",");if("string"==typeof t){const u=parseFloat(t);if(!isNaN(u))return u.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")}return t.toString()}static#t=this.\u0275fac=function(u){return new(u||d)};static#e=this.\u0275pipe=e.Yjl({name:"numberFormat",type:d,pure:!0})}return d})()}}]);